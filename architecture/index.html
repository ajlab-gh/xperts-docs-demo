
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Using XPERTS 2023 Lab Guide to Demo User Contributions and Edits">
      
      
        <meta name="author" content="Alex Jammes">
      
      
        <link rel="canonical" href="https://ajlab-gh.github.io/xperts-docs-demo/architecture/">
      
      
        <link rel="prev" href="../hol-fwb-lab-2/">
      
      
        <link rel="next" href="../bootstrap/">
      
      
      <link rel="icon" href="../img/fortinet.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>Reference Architecture - XPERTS Academy - Cloud (Lab Guide Demo)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fortinet-reference-architecture-for-azure" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="XPERTS Academy - Cloud (Lab Guide Demo)" class="md-header__button md-logo" aria-label="XPERTS Academy - Cloud (Lab Guide Demo)" data-md-component="logo">
      
  <img src="../img/fortinet.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            XPERTS Academy - Cloud (Lab Guide Demo)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reference Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="white" data-md-color-accent="white"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ajlab-gh/xperts-docs-demo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    AJLab-GH/docs-template
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="XPERTS Academy - Cloud (Lab Guide Demo)" class="md-nav__button md-logo" aria-label="XPERTS Academy - Cloud (Lab Guide Demo)" data-md-component="logo">
      
  <img src="../img/fortinet.svg" alt="logo">

    </a>
    XPERTS Academy - Cloud (Lab Guide Demo)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ajlab-gh/xperts-docs-demo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    AJLab-GH/docs-template
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../start-azure-account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing Your Azure Account
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../start-deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying Your Lab Environment in Azure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hands on Labs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Hands on Labs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hol-nsg-fgt-lab-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab 1 - Azure NSG & FortiGate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hol-fwb-lab-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab 2 - FortiWeb
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Resources
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Reference Architecture
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Reference Architecture
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#considerations-and-justifications" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations and Justifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fortiweb-reference-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      FortiWeb Reference Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fortigate-reference-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      FortiGate Reference Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FortiGate Reference Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fortigate-vm-active-passive-with-fabric-connector" class="md-nav__link">
    <span class="md-ellipsis">
      FortiGate-VM – Active-Passive with Fabric connector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fortigate-vm-active-passive-with-load-balancers" class="md-nav__link">
    <span class="md-ellipsis">
      FortiGate-VM – Active-Passive with Load Balancers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fortigate-vm-active-active-with-load-balancers" class="md-nav__link">
    <span class="md-ellipsis">
      FortiGate-VM – Active-Active with Load Balancers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-gateway-load-balancer-and-fortigate" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Gateway Load Balancer and FortiGate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Frequently Asked Questions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bootstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FortiWeb Bootstrap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../role-play/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud Role Play
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../download-pdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Download HoL (pdf)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#considerations-and-justifications" class="md-nav__link">
    <span class="md-ellipsis">
      Considerations and Justifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fortiweb-reference-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      FortiWeb Reference Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fortigate-reference-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      FortiGate Reference Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FortiGate Reference Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fortigate-vm-active-passive-with-fabric-connector" class="md-nav__link">
    <span class="md-ellipsis">
      FortiGate-VM – Active-Passive with Fabric connector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fortigate-vm-active-passive-with-load-balancers" class="md-nav__link">
    <span class="md-ellipsis">
      FortiGate-VM – Active-Passive with Load Balancers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fortigate-vm-active-active-with-load-balancers" class="md-nav__link">
    <span class="md-ellipsis">
      FortiGate-VM – Active-Active with Load Balancers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-gateway-load-balancer-and-fortigate" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Gateway Load Balancer and FortiGate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Frequently Asked Questions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/ajlab-gh/xperts-docs-demo/edit/main/docs/architecture.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="fortinet-reference-architecture-for-azure">Fortinet Reference Architecture for Azure</h1>
<h2 id="considerations-and-justifications">Considerations and Justifications</h2>
<div class="admonition note">
<ul>
<li>
<p><strong>FortiWeb</strong> is primarily designed for web traffic, specifically HTTP/HTTPS, and offers 60+ protections including <strong>machine learning</strong> and <strong>signature-based protections</strong>.</p>
</li>
<li>
<p><strong>FortiGate</strong> is designed for managing all other types of traffic, supporting multiple protocols, and providing <strong>application control</strong> and <strong>intrusion prevention systems</strong>.</p>
</li>
</ul>
</div>
<details class="note">
<summary>WAF Feature Comparison: FortiWeb vs. FortiGate</summary>
<table>
<thead>
<tr>
<th>Feature</th>
<th>FortiGate</th>
<th>FortiWeb</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web App Attack Signatures</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>WAF Signatures (FortiGuard Subscription)</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>IP Reputation (FortiGuard subscription)</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Layer 7 DoS Protection</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span> (+ Bot validation)</td>
</tr>
<tr>
<td>Machine Learning based Anomaly Detection</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Machine Learning based Bot Mitigation</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Machine Learning based API Protections</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>HTTP RFC Validation</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>API Protection</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Cookie Protection, CSRF</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Browser Security (Man-in-the-Browser)</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Syntax based detection</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Antivirus/Antimalware</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Web App Attack Correlation</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Web App Vulnerability Scanner</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Web Filtering</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:red">No</span></td>
</tr>
<tr>
<td>Data Leak Prevention</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Attack Alert Tuning</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Web Defacement Protection</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Authentication Offload</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Site Publishing and SSO</td>
<td>SSO</td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>PCI Compliance</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>Dedicated WAF Throughput</td>
<td><span style="color:red">No</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
<tr>
<td>SSL Inspection</td>
<td><span style="color:green">Yes</span></td>
<td><span style="color:green">Yes</span></td>
</tr>
</tbody>
</table>
</details>
<h2 id="fortiweb-reference-architecture">FortiWeb Reference Architecture</h2>
<details class="note" open="open">
<summary>High-Level View</summary>
<p><span style="color:red;">Click on the image if you want to enlarge it.</span></p>
<p><a class="glightbox" href="../img/fwb-reference-topology.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-reference-topology.png" /></a></p>
</details>
<details class="note">
<summary>Detailed View</summary>
<p><a class="glightbox" href="../img/fwb-reference-topology-detail.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-reference-topology-detail.png" /></a></p>
</details>
<details class="note">
<summary>Detailed View with Routes</summary>
<p><a class="glightbox" href="../img/fwb-reference-topology-detail-routes.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-reference-topology-detail-routes.png" /></a></p>
</details>
<details class="note">
<summary>Internet originating Non-HTTP(S) flows (i.e. SSH etc…)</summary>
<p><a class="glightbox" href="../img/fwb-internet-originating-non-http-flows.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-internet-originating-non-http-flows.png" /></a></p>
</details>
<details class="note">
<summary>Internet originating HTTP(S) flows</summary>
<p><a class="glightbox" href="../img/fwb-internet-originating-http-flows.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-internet-originating-http-flows.png" /></a></p>
</details>
<details class="note">
<summary>Internal originating Non-HTTP(S) flows (i.e. SSH etc…)</summary>
<p><a class="glightbox" href="../img/fwb-internal-originating-non-http-flows.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-internal-originating-non-http-flows.png" /></a></p>
</details>
<details class="note">
<summary>Internal originating HTTP(S) flows</summary>
<p><a class="glightbox" href="../img/fwb-internal-originating-http-flows.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-internal-originating-http-flows.png" /></a></p>
</details>
<h2 id="fortigate-reference-architecture">FortiGate Reference Architecture</h2>
<h3 id="fortigate-vm-active-passive-with-fabric-connector">FortiGate-VM – Active-Passive with Fabric connector</h3>
<div class="admonition example">
<p><strong>Strengths</strong></p>
<ul>
<li>Failover of existing connections</li>
<li>Support of non-TCP/UDP protocols (e.g. ESP, ICMP)</li>
<li>Source IP of connections that ingress from the Internet is not modified</li>
</ul>
<p><strong>Weaknesses</strong></p>
<ul>
<li>Failover time is dependent on Azure API response time and can vary from approximately 45 seconds to up to more than 2 minutes</li>
<li>As with all active-passive designs, the passive node is not passing traffic in the majority of times</li>
</ul>
<p><strong>Uses</strong></p>
<ul>
<li>Architectures requiring IPSEC VPN with NAT-T support (like IOT or other non-FortiGate IPSEC termination)</li>
</ul>
</div>
<details class="note">
<summary>High-Level View</summary>
<p><a class="glightbox" href="../img/fwb-template-ap-fabric-connector.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-template-ap-fabric-connector.png" /></a></p>
</details>
<details class="note">
<summary>Detailed View</summary>
<p><strong>FortiGate1 is Active</strong>
<a class="glightbox" href="../img/fwb-template-ap-fabric-connector-details.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-template-ap-fabric-connector-details.png" /></a></p>
</details>
<h3 id="fortigate-vm-active-passive-with-load-balancers">FortiGate-VM – Active-Passive with Load Balancers</h3>
<div class="admonition example">
<p><strong>Strengths</strong></p>
<ul>
<li>Relatively fast fail over (10 to 20 seconds on average)</li>
<li>Source IP of connections that ingress from Internet is not modified</li>
</ul>
<p><strong>Weaknesses</strong></p>
<ul>
<li>Existing established connections are not failed over(Azure Load Balancer limitation)</li>
<li>Only supports UDP or TCP connections (Azure Load Balancer limitation)</li>
<li>As with all active-passive designs, the passive node is not passing traffic in the majority of times</li>
</ul>
<p><strong>Uses</strong></p>
<ul>
<li>Fortinet Azure SDWAN hub</li>
</ul>
</div>
<details class="note">
<summary>High-Level View</summary>
<p><a class="glightbox" href="../img/fwb-template-ap-fabric-load-balancer.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-template-ap-fabric-load-balancer.png" /></a></p>
</details>
<details class="note">
<summary>Detailed View</summary>
<p><a class="glightbox" href="../img/fwb-template-ap-fabric-load-balancer-details.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-template-ap-fabric-load-balancer-details.png" /></a></p>
</details>
<h3 id="fortigate-vm-active-active-with-load-balancers">FortiGate-VM – Active-Active with Load Balancers</h3>
<div class="admonition example">
<p><strong>Strengths</strong></p>
<ul>
<li>Relatively fast fail over (10 to 20 seconds on average)</li>
<li>Both firewall VMs are processing traffic during normal operations</li>
</ul>
<p><strong>Weaknesses</strong></p>
<ul>
<li>Existing established connections are not failed over(Azure Load Balancer limitation)</li>
<li>Only supports UDP or TCP connections (Azure Load Balancer limitation)</li>
<li>Source IP of connections that ingress from Internet is often modified with Source NAT</li>
</ul>
<p><strong>Uses</strong></p>
<ul>
<li>Recommended Architecture</li>
</ul>
</div>
<details class="note">
<summary>High-Level View</summary>
<p><a class="glightbox" href="../img/fwb-template-aa-fabric-load-balancer.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-template-aa-fabric-load-balancer.png" /></a></p>
</details>
<details class="note">
<summary>Detailed View</summary>
<p><strong>Multiple Public IPs</strong>
<a class="glightbox" href="../img/fwb-template-aa-fabric-load-balancer-details.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-template-aa-fabric-load-balancer-details.png" /></a></p>
</details>
<h3 id="azure-gateway-load-balancer-and-fortigate">Azure Gateway Load Balancer and FortiGate</h3>
<div class="admonition example">
<ul>
<li>The integration of Fortinet FortiGate Next-Generation Firewall (NGFW) with Azure Gateway Load Balancer (GWLB) simplifies deployment and configuration while reducing outages.</li>
<li>The Azure GWLB supports service chaining to enable transparent deployment of firewall NVAs without introducing management overhead.</li>
<li>It uses the VXLAN protocol for encapsulation and decapsulation, maintaining flow symmetry for traffic inspection by firewall NVAs.</li>
</ul>
</div>
<details class="note">
<summary>Reference Architecture</summary>
<p><strong>Consumer Load  Balancer Frontend Public IP</strong>
<a class="glightbox" href="../img/fwb-azure-gateway-load-balancer.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../img/fwb-azure-gateway-load-balancer.png" /></a></p>
</details>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<div class="admonition note">
<p><strong>Q – Does this apply to other Public Clouds ?</strong></p>
<p>A – This Architecture is specific to Azure.</p>
<hr />
<p><strong>Q – Why are the FortiWeb VMs and FortiGate VMs in parallel instead of series for Internet web flows?</strong></p>
<p>A – FortiWeb has integrated IPS and AV thus no need to duplicate on FortiGate using up cloud computing cycles.</p>
<hr />
<p><strong>Q – Why is the FWB Internal LB in the FWBExternal Subnet and not the FWBInternal Subnet?</strong></p>
<p>A – Because it is used only for traffic passing through SDWAN.</p>
<hr />
<p><strong>Q – Why is there no Azure Internal LB in the FWBInternal subnet</strong></p>
<p>A – FortiWeb can only be deployed in reversed proxy in Azure and thus the traffic replies automatically go back to the appropriate FortiWeb VM thus negating the needs to have Azure Internal Load Balancer in HA Ports.</p>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../hol-fwb-lab-2/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Lab 2 - FortiWeb">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Lab 2 - FortiWeb
              </div>
            </div>
          </a>
        
        
          
          <a href="../bootstrap/" class="md-footer__link md-footer__link--next" aria-label="Next: FortiWeb Bootstrap">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                FortiWeb Bootstrap
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Try and be nice
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.tabs.link", "content.action.edit"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>